{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"booking-container\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"modal\"\n};\nconst _hoisted_6 = {\n  class: \"modal-content\"\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  key: 2\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[15] || (_cache[15] = _createElementVNode(\"h2\", null, \"내 예약 조회\", -1 /* HOISTED */)), $data.reservations && $data.reservations.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.reservations, reservation => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: reservation.bookingId\n    }, [_createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"숙소:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(reservation.accommodation.name), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"룸:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(reservation.room.name), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"strong\", null, \"체크인:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(reservation.checkIn), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"strong\", null, \"체크아웃:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(reservation.checkOut), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"strong\", null, \"인원:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(reservation.numberOfPerson) + \"명\", 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"strong\", null, \"결제 상태:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(reservation.paymentCompleted ? \"완료\" : \"미완료\"), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n      onClick: $event => $options.editReservation(reservation)\n    }, \"수정\", 8 /* PROPS */, _hoisted_3), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteReservation(reservation.bookingId),\n      class: \"delete-btn\"\n    }, \"삭제\", 8 /* PROPS */, _hoisted_4)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" 예약 수정 모달 \"), $data.showEditModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"예약 수정\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.updateBooking && $options.updateBooking(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"체크인:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.editBooking.checkIn = $event),\n    type: \"date\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editBooking.checkIn]])]), _createElementVNode(\"div\", null, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", null, \"체크아웃:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.editBooking.checkOut = $event),\n    type: \"date\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editBooking.checkOut]])]), _cache[12] || (_cache[12] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"저장\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = $event => $data.showEditModal = false)\n  }, \"취소\")], 32 /* NEED_HYDRATION */)])])) : _createCommentVNode(\"v-if\", true)])) : $data.reservations ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, \"예약 내역이 없습니다.\")) : (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"예약 정보를 불러오는 중...\")), _createVNode(_component_router_link, {\n    to: \"/mypage\"\n  }, {\n    default: _withCtx(() => _cache[14] || (_cache[14] = [_createTextVNode(\"마이페이지로 돌아가기\")])),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","$data","reservations","length","_hoisted_2","_Fragment","_renderList","reservation","bookingId","_createTextVNode","_toDisplayString","accommodation","name","room","checkIn","checkOut","numberOfPerson","paymentCompleted","onClick","$event","$options","editReservation","_hoisted_3","deleteReservation","_hoisted_4","_createCommentVNode","showEditModal","_hoisted_5","_hoisted_6","onSubmit","_cache","_withModifiers","args","updateBooking","editBooking","type","_hoisted_7","_hoisted_8","_createVNode","_component_router_link","to","default","_withCtx","_"],"sources":["C:\\Users\\mycoms\\Desktop\\study\\duckfront\\src\\components\\Booking.vue"],"sourcesContent":["<template>\r\n  <div class=\"booking-container\">\r\n    <h2>내 예약 조회</h2>\r\n    <div v-if=\"reservations && reservations.length\">\r\n      <ul>\r\n        <li v-for=\"reservation in reservations\" :key=\"reservation.bookingId\">\r\n          <p><strong>숙소:</strong> {{ reservation.accommodation.name }}</p>\r\n          <p><strong>룸:</strong> {{ reservation.room.name }}</p>\r\n          <p><strong>체크인:</strong> {{ reservation.checkIn }}</p>\r\n          <p><strong>체크아웃:</strong> {{ reservation.checkOut }}</p>\r\n          <p><strong>인원:</strong> {{ reservation.numberOfPerson }}명</p>\r\n          <p><strong>결제 상태:</strong> {{ reservation.paymentCompleted ? \"완료\" : \"미완료\" }}</p>\r\n          <button @click=\"editReservation(reservation)\">수정</button>\r\n          <button @click=\"deleteReservation(reservation.bookingId)\" class=\"delete-btn\">삭제</button>\r\n        </li>\r\n      </ul>\r\n\r\n      <!-- 예약 수정 모달 -->\r\n      <div v-if=\"showEditModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <h3>예약 수정</h3>\r\n          <form @submit.prevent=\"updateBooking\">\r\n            <div>\r\n              <label>체크인:</label>\r\n              <input v-model=\"editBooking.checkIn\" type=\"date\" />\r\n            </div>\r\n            <div>\r\n              <label>체크아웃:</label>\r\n              <input v-model=\"editBooking.checkOut\" type=\"date\" />\r\n            </div>\r\n            <button type=\"submit\">저장</button>\r\n            <button @click=\"showEditModal = false\">취소</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <p v-else-if=\"reservations\">예약 내역이 없습니다.</p>\r\n    <p v-else>예약 정보를 불러오는 중...</p>\r\n    <router-link to=\"/mypage\">마이페이지로 돌아가기</router-link>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from \"../api\";\r\n\r\nexport default {\r\n  name: \"Booking\",\r\n  data() {\r\n    return {\r\n      reservations: null,\r\n      showEditModal: false,\r\n      editBooking: {},\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchReservations();\r\n  },\r\n  methods: {\r\n    async fetchReservations() {\r\n      try {\r\n        const response = await api.get(\"/api/users/book\");\r\n        const result = response.data;\r\n        if (result.status === 200 && !result.errorCode) {\r\n          this.reservations = result.data;\r\n          console.log(\"예약 조회 성공:\", this.reservations);\r\n        } else {\r\n          console.error(\"예약 조회 실패:\", result);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"예약 조회 오류:\", error.response?.data || error.message);\r\n      }\r\n    },\r\n    editReservation(reservation) {\r\n      this.editBooking = { ...reservation }; // 전체 복사\r\n      this.showEditModal = true;\r\n    },\r\n    async updateBooking() {\r\n      try {\r\n        const response = await api.put(\"/api/users/book\", {\r\n          bookingId: this.editBooking.bookingId,\r\n          checkIn: this.editBooking.checkIn,\r\n          checkOut: this.editBooking.checkOut,\r\n          numberOfPerson: this.editBooking.numberOfPerson,\r\n          paymentCompleted: this.editBooking.paymentCompleted,\r\n          accommodation: this.editBooking.accommodation,\r\n          room: this.editBooking.room,\r\n        });\r\n        const result = response.data;\r\n        if (result.status === 200 && !result.errorCode) {\r\n          this.showEditModal = false;\r\n          this.fetchReservations(); // 갱신\r\n          alert(\"예약 수정 성공!\");\r\n        } else {\r\n          alert(\"예약 수정 실패: \" + (result.message || \"오류 발생\"));\r\n        }\r\n      } catch (error) {\r\n        alert(\"예약 수정 오류: \" + (error.response?.data.message || error.message));\r\n      }\r\n    },\r\n    async deleteReservation(bookingId) {\r\n      if (confirm(\"이 예약을 삭제하시겠습니까?\")) {\r\n        try {\r\n          const response = await api.delete(`/api/users/book/${bookingId}`);\r\n          const result = response.data;\r\n          if (result.status === 200 && !result.errorCode) {\r\n            this.fetchReservations(); // 갱신\r\n            alert(\"예약 삭제 성공!\");\r\n          } else {\r\n            alert(\"예약 삭제 실패: \" + (result.message || \"오류 발생\"));\r\n          }\r\n        } catch (error) {\r\n          alert(\"예약 삭제 오류: \" + (error.response?.data.message || error.message));\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.booking-container {\r\n  max-width: 600px;\r\n  margin: 50px auto;\r\n  padding: 20px;\r\n}\r\nul {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #eee;\r\n}\r\nbutton {\r\n  margin-left: 10px;\r\n  padding: 5px 10px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n.delete-btn {\r\n  background-color: #dc3545;\r\n}\r\n.delete-btn:hover {\r\n  background-color: #c82333;\r\n}\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.modal-content {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 5px;\r\n}\r\n.modal div {\r\n  margin-bottom: 15px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}