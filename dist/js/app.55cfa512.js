(function(){"use strict";var e={7529:function(e,o,t){var a=t(5130),n=t(6768);const l={id:"app"};function s(e,o,t,a,s,r){const c=(0,n.g2)("NavBar"),i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(c),(0,n.bF)(i)])}var r=t(4232);const c={class:"navbar"},i={class:"logo"},u={class:"menu"};function d(e,o,t,a,l,s){const d=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("nav",c,[(0,n.Lk)("div",i,[(0,n.bF)(d,{to:"/"},{default:(0,n.k6)((()=>o[1]||(o[1]=[(0,n.eW)("DUCK TEL")]))),_:1})]),(0,n.Lk)("div",u,[l.isLoggedIn?((0,n.uX)(),(0,n.Wv)(d,{key:0,to:"/mypage"},{default:(0,n.k6)((()=>o[2]||(o[2]=[(0,n.eW)("마이페이지")]))),_:1})):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>s.handleAuth&&s.handleAuth(...e))},(0,r.v_)(l.isLoggedIn?"로그아웃":"로그인"),1)])])}t(4114);var m=t(4373),p=(t(8111),t(3579),t(4603),t(7566),t(8721),t(1387));const h={class:"home-container"},k={class:"filter-row"},g={class:"filter-item"},v={key:0},L={class:"accommodations-container"},y=["onClick"],f=["src"],b={class:"accommodation-details"},I={key:0},D={key:1},C={class:"accommodations-container"},_=["onClick"],w=["src"],T={class:"accommodation-details"},S={key:0},$={key:2},E={class:"accommodations-container"},P=["onClick"],X=["src"],O={class:"accommodation-details"},U={key:0},H={key:3};function W(e,o,t,l,s,c){return(0,n.uX)(),(0,n.CE)("div",h,[o[7]||(o[7]=(0,n.Lk)("header",null,[(0,n.Lk)("h2",null,"홈페이지")],-1)),(0,n.Lk)("div",k,[(0,n.Lk)("div",g,[o[3]||(o[3]=(0,n.Lk)("label",{for:"category"},"카테고리 선택:",-1)),(0,n.bo)((0,n.Lk)("select",{id:"category","onUpdate:modelValue":o[0]||(o[0]=e=>s.selectedCategory=e),onChange:o[1]||(o[1]=(...e)=>c.goToSubHome&&c.goToSubHome(...e))},o[2]||(o[2]=[(0,n.Fv)('<option value="" disabled data-v-4d667184>카테고리를 선택하세요</option><option value="호텔" data-v-4d667184>호텔</option><option value="리조트" data-v-4d667184>리조트</option><option value="펜션" data-v-4d667184>펜션</option><option value="게스트하우스" data-v-4d667184>게스트하우스</option><option value="모텔" data-v-4d667184>모텔</option>',6)]),544),[[a.u1,s.selectedCategory]])])]),s.homeData&&s.homeData.discountAccommodations?((0,n.uX)(),(0,n.CE)("div",v,[o[4]||(o[4]=(0,n.Lk)("h3",null,"할인 숙소",-1)),(0,n.Lk)("div",L,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.homeData.discountAccommodations,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.accommodationId,class:"accommodation-card",onClick:o=>c.goToPlaces(e.accommodationId)},[e.image&&e.image.length?((0,n.uX)(),(0,n.CE)("img",{key:0,src:e.image[0],alt:"숙소 이미지",class:"accommodation-image"},null,8,f)):(0,n.Q3)("",!0),(0,n.Lk)("div",b,[(0,n.Lk)("strong",null,(0,r.v_)(e.name),1),(0,n.Lk)("p",null,(0,r.v_)(e.location),1),e.discount?((0,n.uX)(),(0,n.CE)("p",I,"할인: "+(0,r.v_)(e.discount)+"%",1)):(0,n.Q3)("",!0),(0,n.Lk)("p",null,"좋아요: "+(0,r.v_)(e.likeCount),1)])],8,y)))),128))])])):(0,n.Q3)("",!0),s.homeData&&s.homeData.favoriteAccommodations?((0,n.uX)(),(0,n.CE)("div",D,[o[5]||(o[5]=(0,n.Lk)("h3",null,"인기 숙소",-1)),(0,n.Lk)("div",C,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.homeData.favoriteAccommodations,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.accommodationId,class:"accommodation-card",onClick:o=>c.goToPlaces(e.accommodationId)},[e.image&&e.image.length?((0,n.uX)(),(0,n.CE)("img",{key:0,src:e.image[0],alt:"숙소 이미지",class:"accommodation-image"},null,8,w)):(0,n.Q3)("",!0),(0,n.Lk)("div",T,[(0,n.Lk)("strong",null,(0,r.v_)(e.name),1),(0,n.Lk)("p",null,(0,r.v_)(e.location),1),e.discount?((0,n.uX)(),(0,n.CE)("p",S,"할인: "+(0,r.v_)(e.discount)+"%",1)):(0,n.Q3)("",!0),(0,n.Lk)("p",null,"좋아요: "+(0,r.v_)(e.likeCount),1)])],8,_)))),128))])])):(0,n.Q3)("",!0),s.homeData&&s.homeData.seasonalAccommodations?((0,n.uX)(),(0,n.CE)("div",$,[o[6]||(o[6]=(0,n.Lk)("h3",null,"계절 추천 숙소",-1)),(0,n.Lk)("div",E,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.homeData.seasonalAccommodations,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.accommodationId,class:"accommodation-card",onClick:o=>c.goToPlaces(e.accommodationId)},[e.image&&e.image.length?((0,n.uX)(),(0,n.CE)("img",{key:0,src:e.image[0],alt:"숙소 이미지",class:"accommodation-image"},null,8,X)):(0,n.Q3)("",!0),(0,n.Lk)("div",O,[(0,n.Lk)("strong",null,(0,r.v_)(e.name),1),(0,n.Lk)("p",null,(0,r.v_)(e.location),1),e.discount?((0,n.uX)(),(0,n.CE)("p",U,"할인: "+(0,r.v_)(e.discount)+"%",1)):(0,n.Q3)("",!0),(0,n.Lk)("p",null,"좋아요: "+(0,r.v_)(e.likeCount),1)])],8,P)))),128))])])):(0,n.Q3)("",!0),s.homeData?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("p",H,"데이터를 불러오는 중..."))])}var A={name:"HomePage",data(){return{homeData:null,selectedCategory:"",selectedLocation:"",checkInDate:(new Date).toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0]}},computed:{isLoggedIn(){return!!localStorage.getItem("accessToken")}},created(){this.fetchHomeData()},methods:{async fetchHomeData(){try{const e=await Do.get("/api/home"),o=e.data;200!==o.status||o.errorCode?console.error("홈 데이터 조회 실패:",o):(this.homeData=o.data,console.log("홈 데이터 조회 성공:",this.homeData))}catch(e){console.error("홈 데이터 조회 오류:",e.response?.data||e.message)}},logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.$router.push("/")},async goToSubHome(){this.selectedCategory&&this.$router.push({name:"CategoryHome",params:{category:this.selectedCategory}})},goToPlaces(e){console.log("Navigating to:",`/places/${e}/${this.checkInDate}/${this.checkOutDate}`),this.$router.push(`/places/${e}/${this.checkInDate}/${this.checkOutDate}`)}}},R=t(1241);const Q=(0,R.A)(A,[["render",W],["__scopeId","data-v-4d667184"]]);var B=Q;const F={class:"login-container"},V={class:"social-login"};function x(e,o,t,l,s,r){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",F,[o[10]||(o[10]=(0,n.Lk)("h2",null,"로그인",-1)),(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(0,a.D$)(((...e)=>r.handleLogin&&r.handleLogin(...e)),["prevent"]))},[(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[6]||(o[6]=(0,n.eW)("아이디: ")),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.username=e),required:""},null,512),[[a.Jo,s.username]])])]),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[7]||(o[7]=(0,n.eW)("비밀번호: ")),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=e=>s.password=e),required:""},null,512),[[a.Jo,s.password]])])]),o[8]||(o[8]=(0,n.Lk)("button",{type:"submit"},"로그인",-1))],32),(0,n.bF)(c,{to:"/register"},{default:(0,n.k6)((()=>o[9]||(o[9]=[(0,n.eW)("회원가입")]))),_:1}),(0,n.Lk)("div",V,[(0,n.Lk)("button",{onClick:o[3]||(o[3]=e=>r.socialLogin("google")),class:"google-btn"},"구글로 로그인"),(0,n.Lk)("button",{onClick:o[4]||(o[4]=e=>r.socialLogin("kakao")),class:"kakao-btn"},"카카오로 로그인"),(0,n.Lk)("button",{onClick:o[5]||(o[5]=e=>r.socialLogin("naver")),class:"naver-btn"},"네이버로 로그인")])])}var M={name:"LoginForm",data(){return{username:"",password:""}},mounted(){const e=new URLSearchParams(window.location.search);e.has("accessToken")&&this.handleSocialLoginCallback()},methods:{async handleLogin(){try{const e=new URLSearchParams;e.append("username",this.username),e.append("password",this.password);const o=await Do.post("/api/auth/login",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});console.log("로그인 성공:",o.data),this.processLoginResponse(o.data)}catch(e){const o=e.response?.data;console.error("로그인 실패:",o?.message||e.message)}},processLoginResponse(e){const o=e.data;if(!o||!o.accessToken||!o.refreshToken)return void console.error("로그인 응답에 토큰 없음",o);console.log("토큰 저장 중..."),localStorage.setItem("accessToken",o.accessToken),localStorage.setItem("refreshToken",o.refreshToken),localStorage.setItem("loginType",o.loginType);const t=sessionStorage.getItem("redirectUrl")||"/";sessionStorage.removeItem("redirectUrl"),console.log(`로그인 성공, ${t}로 이동`),this.$router.push(t)},socialLogin(e){const o=`${window.location.origin}/login?redirect=${encodeURIComponent(this.$route.fullPath)}`,t=`http://localhost:8090/oauth2/authorization/${e}?redirect_uri=${encodeURIComponent(o)}`;console.log(`소셜 로그인 리다이렉트: ${t}`),window.location.href=t},handleSocialLoginCallback(){const e=new URLSearchParams(window.location.search),o=e.get("accessToken"),t=e.get("refreshToken"),a=e.get("loginType");if(o&&t&&a){console.log("소셜 로그인 성공 - 토큰:",o),localStorage.setItem("accessToken",o),localStorage.setItem("refreshToken",t),localStorage.setItem("loginType",a),console.log("loginType:",a),console.log("저장된 accessToken 확인:",localStorage.getItem("accessToken")),console.log("저장된 refreshToken 확인:",localStorage.getItem("refreshToken")),console.log("저장된 loginType 확인:",localStorage.getItem("loginType"));const e=sessionStorage.getItem("redirectUrl")||"/";sessionStorage.removeItem("redirectUrl"),this.$router.push(e),window.history.replaceState({},document.title,"/login")}else console.error("소셜 로그인 실패: 필요한 토큰 정보가 없습니다.")}}};const q=(0,R.A)(M,[["render",x],["__scopeId","data-v-5933c6b4"]]);var J=q;const N={class:"register-container"},j={key:0,class:"error-message"};function K(e,o,t,l,s,c){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",N,[o[14]||(o[14]=(0,n.Lk)("h2",null,"회원가입",-1)),(0,n.Lk)("form",{onSubmit:o[5]||(o[5]=(0,a.D$)(((...e)=>c.handleRegister&&c.handleRegister(...e)),["prevent"]))},[(0,n.Lk)("div",null,[o[6]||(o[6]=(0,n.Lk)("label",{for:"username"},"아이디:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":o[0]||(o[0]=o=>e.username=o),placeholder:"영문자/숫자 6~16자"},null,512),[[a.Jo,e.username]])]),(0,n.Lk)("div",null,[o[7]||(o[7]=(0,n.Lk)("label",{for:"password"},"비밀번호:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=o=>e.password=o),placeholder:"8~16자"},null,512),[[a.Jo,e.password]])]),(0,n.Lk)("div",null,[o[8]||(o[8]=(0,n.Lk)("label",{for:"phoneNumber"},"전화번호:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"phoneNumber","onUpdate:modelValue":o[2]||(o[2]=o=>e.phoneNumber=o),placeholder:"10~11자 (숫자만)"},null,512),[[a.Jo,e.phoneNumber]])]),(0,n.Lk)("div",null,[o[9]||(o[9]=(0,n.Lk)("label",{for:"email"},"이메일:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":o[3]||(o[3]=o=>e.email=o),placeholder:"example@domain.com"},null,512),[[a.Jo,e.email]])]),(0,n.Lk)("div",null,[o[10]||(o[10]=(0,n.Lk)("label",{for:"name"},"이름:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":o[4]||(o[4]=o=>e.name=o),placeholder:"2~8자"},null,512),[[a.Jo,e.name]])]),o[11]||(o[11]=(0,n.Lk)("button",{type:"submit"},"회원가입",-1))],32),e.errorMessage?((0,n.uX)(),(0,n.CE)("p",j,(0,r.v_)(e.errorMessage),1)):(0,n.Q3)("",!0),(0,n.Lk)("p",null,[o[13]||(o[13]=(0,n.eW)(" 이미 계정이 있으신가요? ")),(0,n.bF)(i,{to:"/"},{default:(0,n.k6)((()=>o[12]||(o[12]=[(0,n.eW)("로그인")]))),_:1})])])}var z={name:"RegisterForm",methods:{async handleRegister(){this.errorMessage="";try{const e=await Do.post("/api/users/register",{username:this.username,password:this.password,phoneNumber:this.phoneNumber,email:this.email,name:this.name}),o=e.data;if(console.log("백엔드 응답:",o),200!==o.status||o.errorCode)this.errorMessage=o.message||"회원가입에 실패했습니다.",console.error("회원가입 실패:",o);else{const e=o.data||"사용자";alert(`${e}님 회원가입을 축하드립니다!`),console.log("회원가입 성공:",o),this.$router.push("/login")}}catch(e){const o=e.response?.data;this.errorMessage=o?.message||"회원가입 중 오류가 발생했습니다.",console.error("회원가입 실패:",o||e.message)}}}};const G=(0,R.A)(z,[["render",K],["__scopeId","data-v-09e68683"]]);var Y=G;const Z={class:"mypage-container"};function ee(e,o,t,a,l,s){const r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Z,[o[3]||(o[3]=(0,n.Lk)("h2",null,"마이페이지",-1)),(0,n.Lk)("nav",null,[(0,n.bF)(r,{to:"/profile"},{default:(0,n.k6)((()=>o[0]||(o[0]=[(0,n.eW)("내 정보")]))),_:1}),o[2]||(o[2]=(0,n.eW)(" | ")),(0,n.bF)(r,{to:"/booking"},{default:(0,n.k6)((()=>o[1]||(o[1]=[(0,n.eW)("내 예약 조회")]))),_:1})])])}var oe={name:"MyPage",methods:{logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.$router.push("/")}}};const te=(0,R.A)(oe,[["render",ee],["__scopeId","data-v-5fd71ff4"]]);var ae=te;const ne={class:"profile-container"},le={key:0},se={key:0},re={key:1};function ce(e,o,t,l,s,c){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",ne,[o[12]||(o[12]=(0,n.Lk)("h2",null,"내 정보",-1)),null!==s.userInfo?((0,n.uX)(),(0,n.CE)("div",le,[(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(0,a.D$)(((...e)=>c.updateProfile&&c.updateProfile(...e)),["prevent"]))},[(0,n.Lk)("div",null,[(0,n.Lk)("p",null,"아이디: "+(0,r.v_)(s.userInfo.username),1)]),(0,n.Lk)("div",null,[o[6]||(o[6]=(0,n.Lk)("label",null,"이메일:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.editUser.email=e),placeholder:"이메일"},null,512),[[a.Jo,s.editUser.email]])]),(0,n.Lk)("div",null,[o[7]||(o[7]=(0,n.Lk)("label",null,"전화번호:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.editUser.phoneNumber=e),placeholder:"전화번호"},null,512),[[a.Jo,s.editUser.phoneNumber]])]),o[8]||(o[8]=(0,n.Lk)("button",{type:"submit"},"수정",-1))],32),c.isLocalLogin?((0,n.uX)(),(0,n.CE)("h3",se,"비밀번호 재설정")):(0,n.Q3)("",!0),c.isLocalLogin?((0,n.uX)(),(0,n.CE)("form",{key:1,onSubmit:o[4]||(o[4]=(0,a.D$)(((...e)=>c.resetPassword&&c.resetPassword(...e)),["prevent"]))},[(0,n.Lk)("div",null,[o[9]||(o[9]=(0,n.Lk)("label",null,"새 비밀번호:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=e=>s.newPassword=e),placeholder:"새 비밀번호"},null,512),[[a.Jo,s.newPassword]])]),o[10]||(o[10]=(0,n.Lk)("button",{type:"submit"},"재설정",-1))],32)):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:o[5]||(o[5]=(...e)=>c.deleteProfile&&c.deleteProfile(...e)),class:"delete-btn"},"회원 탈퇴")])):((0,n.uX)(),(0,n.CE)("p",re,"정보를 불러오는 중...")),(0,n.bF)(i,{to:"/mypage"},{default:(0,n.k6)((()=>o[11]||(o[11]=[(0,n.eW)("마이페이지로 돌아가기")]))),_:1})])}var ie={name:"UserProfile",data(){return{userInfo:null,editUser:{name:"",email:"",phoneNumber:""},newPassword:""}},created(){this.fetchProfile()},computed:{isLocalLogin(){return"LOCAL"===localStorage.getItem("loginType")}},methods:{async fetchProfile(){try{const e=await Do.get("/api/users/profile"),o=e.data;console.log("백엔드 응답 전체:",o),200!==o.status||o.errorCode?console.error("프로필 조회 실패:",o):(this.userInfo=o.data,this.editUser={...o.data},console.log("프로필 조회 성공:",this.userInfo))}catch(e){console.error("프로필 조회 오류:",e.response?.data||e.message)}},async updateProfile(){try{const e=await Do.put("/api/users/profile",this.editUser),o=e.data;200!==o.status||o.errorCode?alert("정보 수정 실패: "+(o.message||"오류 발생")):(this.userInfo=o.data,alert("정보 수정 성공!"))}catch(e){alert("정보 수정 오류: "+(e.response?.data.message||e.message))}},async resetPassword(){try{const e=await Do.post("/api/users/password-reset",{password:this.newPassword}),o=e.data;console.log("비밀번호 재설정 응답:",o),"비밀번호가 변경 되었습니다."===o?(alert("비밀번호 재설정 성공!"),this.newPassword=""):alert("비밀번호 재설정 실패")}catch(e){alert("비밀번호 재설정 오류: "+(e.response?.data||e.message))}},async deleteProfile(){if(confirm("정말 탈퇴하시겠습니까?"))try{const e=await Do.delete("/api/users/profile/"+this.userInfo.userId),o=e.data;"삭제되었습니다"===o?(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),alert("회원 탈퇴 성공!"),this.$router.push("/"),window.location.reload()):alert("회원 탈퇴 실패")}catch(e){alert("회원 탈퇴 오류: "+(e.response?.data||e.message))}}}};const ue=(0,R.A)(ie,[["render",ce],["__scopeId","data-v-73207479"]]);var de=ue;const me={class:"booking-container"},pe={key:0},he=["onClick"],ke=["onClick"],ge={key:0,class:"modal"},ve={class:"modal-content"},Le={key:1},ye={key:2};function fe(e,o,t,l,s,c){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",me,[o[14]||(o[14]=(0,n.Lk)("h2",null,"내 예약 조회",-1)),s.reservations&&s.reservations.length?((0,n.uX)(),(0,n.CE)("div",pe,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.reservations,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.bookingId},[(0,n.Lk)("p",null,[o[4]||(o[4]=(0,n.Lk)("strong",null,"숙소:",-1)),(0,n.eW)(" "+(0,r.v_)(e.accommodation.name),1)]),(0,n.Lk)("p",null,[o[5]||(o[5]=(0,n.Lk)("strong",null,"룸:",-1)),(0,n.eW)(" "+(0,r.v_)(e.room.name),1)]),(0,n.Lk)("p",null,[o[6]||(o[6]=(0,n.Lk)("strong",null,"체크인:",-1)),(0,n.eW)(" "+(0,r.v_)(e.checkIn),1)]),(0,n.Lk)("p",null,[o[7]||(o[7]=(0,n.Lk)("strong",null,"체크아웃:",-1)),(0,n.eW)(" "+(0,r.v_)(e.checkOut),1)]),(0,n.Lk)("p",null,[o[8]||(o[8]=(0,n.Lk)("strong",null,"결제 상태:",-1)),(0,n.eW)(" "+(0,r.v_)(e.paymentCompleted?"완료":"미완료"),1)]),(0,n.Lk)("button",{onClick:o=>c.editReservation(e)},"수정",8,he),(0,n.Lk)("button",{onClick:o=>c.deleteReservation(e.bookingId),class:"delete-btn"},"삭제",8,ke)])))),128))]),s.showEditModal?((0,n.uX)(),(0,n.CE)("div",ge,[(0,n.Lk)("div",ve,[o[12]||(o[12]=(0,n.Lk)("h3",null,"예약 수정",-1)),(0,n.Lk)("form",{onSubmit:o[3]||(o[3]=(0,a.D$)(((...e)=>c.updateBooking&&c.updateBooking(...e)),["prevent"]))},[(0,n.Lk)("div",null,[o[9]||(o[9]=(0,n.Lk)("label",null,"체크인:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.editBooking.checkIn=e),type:"date"},null,512),[[a.Jo,s.editBooking.checkIn]])]),(0,n.Lk)("div",null,[o[10]||(o[10]=(0,n.Lk)("label",null,"체크아웃:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.editBooking.checkOut=e),type:"date"},null,512),[[a.Jo,s.editBooking.checkOut]])]),o[11]||(o[11]=(0,n.Lk)("button",{type:"submit"},"저장",-1)),(0,n.Lk)("button",{onClick:o[2]||(o[2]=e=>s.showEditModal=!1)},"취소")],32)])])):(0,n.Q3)("",!0)])):s.reservations?((0,n.uX)(),(0,n.CE)("p",Le,"예약 내역이 없습니다.")):((0,n.uX)(),(0,n.CE)("p",ye,"예약 정보를 불러오는 중...")),(0,n.bF)(i,{to:"/mypage"},{default:(0,n.k6)((()=>o[13]||(o[13]=[(0,n.eW)("마이페이지로 돌아가기")]))),_:1})])}var be={name:"UserBooking",data(){return{reservations:null,showEditModal:!1,editBooking:{}}},created(){this.fetchReservations()},methods:{async fetchReservations(){try{const e=await Do.get("/api/users/book"),o=e.data;200!==o.status||o.errorCode?console.error("예약 조회 실패:",o):(this.reservations=o.data,console.log("예약 조회 성공:",this.reservations))}catch(e){console.error("예약 조회 오류:",e.response?.data||e.message)}},editReservation(e){this.editBooking={...e},this.showEditModal=!0},async updateBooking(){try{const e=await Do.put("/api/users/book",{bookingId:this.editBooking.bookingId,checkIn:this.editBooking.checkIn,checkOut:this.editBooking.checkOut,numberOfPerson:this.editBooking.numberOfPerson,paymentCompleted:this.editBooking.paymentCompleted,accommodation:this.editBooking.accommodation,room:this.editBooking.room}),o=e.data;200!==o.status||o.errorCode?alert("예약 수정 실패: "+(o.message||"오류 발생")):(this.showEditModal=!1,this.fetchReservations(),alert("예약 수정 성공!"))}catch(e){alert("예약 수정 오류: "+(e.response?.data.message||e.message))}},async deleteReservation(e){if(confirm("이 예약을 삭제하시겠습니까?"))try{const o=await Do.delete(`/api/users/book/${e}`),t=o.data;200!==t.status||t.errorCode?alert("예약 삭제 실패: "+(t.message||"오류 발생")):(this.fetchReservations(),alert("예약 삭제 성공!"))}catch(o){alert("예약 삭제 오류: "+(o.response?.data.message||o.message))}}}};const Ie=(0,R.A)(be,[["render",fe],["__scopeId","data-v-480114f7"]]);var De=Ie;const Ce={class:"sub-home-container"},_e={key:0},we={key:0},Te=["onClick"],Se=["src"],$e={key:1},Ee={key:2},Pe={key:1},Xe={key:1};function Oe(e,o,t,l,s,c){return(0,n.uX)(),(0,n.CE)("div",Ce,[(0,n.Lk)("h2",null,(0,r.v_)(c.category)+" 페이지",1),(0,n.Lk)("div",null,[o[3]||(o[3]=(0,n.Lk)("label",{for:"location"},"지역 선택:",-1)),(0,n.bo)((0,n.Lk)("select",{id:"location","onUpdate:modelValue":o[0]||(o[0]=e=>s.selectedLocation=e),onChange:o[1]||(o[1]=(...e)=>c.goToLocationHome&&c.goToLocationHome(...e))},o[2]||(o[2]=[(0,n.Fv)('<option value="" disabled data-v-36f03f6e>지역을 선택하세요</option><option value="서울 강남구" data-v-36f03f6e>서울 강남구</option><option value="부산 해운대" data-v-36f03f6e>부산 해운대</option><option value="제주 서귀포" data-v-36f03f6e>제주 서귀포</option><option value="강원도 평창" data-v-36f03f6e>강원도 평창</option><option value="서울 종로구" data-v-36f03f6e>서울 종로구</option>',6)]),544),[[a.u1,s.selectedLocation]])]),s.subHomeData?((0,n.uX)(),(0,n.CE)("div",_e,[(0,n.Lk)("h3",null,(0,r.v_)(c.category)+" 숙소 목록",1),s.subHomeData.categoryAccommodations&&s.subHomeData.categoryAccommodations.length?((0,n.uX)(),(0,n.CE)("ul",we,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.subHomeData.categoryAccommodations,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.accommodationId,onClick:o=>c.goToPlaces(e.accommodationId),style:{cursor:"pointer"}},[(0,n.Lk)("strong",null,(0,r.v_)(e.name),1),(0,n.eW)(" - "+(0,r.v_)(e.location),1),o[4]||(o[4]=(0,n.Lk)("br",null,null,-1)),e.image&&e.image.length?((0,n.uX)(),(0,n.CE)("img",{key:0,src:e.image[0],alt:"숙소 이미지",class:"accommodation-image"},null,8,Se)):(0,n.Q3)("",!0),o[5]||(o[5]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"태그: "+(0,r.v_)(e.tag||"없음"),1),o[6]||(o[6]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"설명: "+(0,r.v_)(e.explanation||"없음"),1),o[7]||(o[7]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"서비스: "+(0,r.v_)(e.serviceInfo||"없음"),1),o[8]||(o[8]=(0,n.Lk)("br",null,null,-1)),e.discount?((0,n.uX)(),(0,n.CE)("span",$e,"할인: "+(0,r.v_)(e.discount)+"%",1)):(0,n.Q3)("",!0),o[9]||(o[9]=(0,n.Lk)("br",null,null,-1)),e.season?((0,n.uX)(),(0,n.CE)("span",Ee,"계절: "+(0,r.v_)(e.season),1)):(0,n.Q3)("",!0),o[10]||(o[10]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"좋아요: "+(0,r.v_)(e.likeCount),1)],8,Te)))),128))])):((0,n.uX)(),(0,n.CE)("p",Pe,(0,r.v_)(c.category)+" 카테고리에 숙소가 없습니다.",1))])):((0,n.uX)(),(0,n.CE)("p",Xe,"데이터를 불러오는 중..."))])}var Ue={name:"SubHome",data(){return{subHomeData:null,selectedLocation:"",checkInDate:(new Date).toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0]}},computed:{category(){return this.$route.params.category}},created(){this.fetchSubHomeData()},watch:{"$route.params.category":"fetchSubHomeData"},methods:{async fetchSubHomeData(){this.selectedLocation="";try{const e=await Do.get(`/api/home/${encodeURIComponent(this.category)}`),o=e.data;200!==o.status||o.errorCode?console.error("Home 데이터 조회 실패:",o):(this.subHomeData=o.data,console.log("Home 데이터 조회 성공:",this.subHomeData))}catch(e){console.error("Home 데이터 조회 오류:",e.response?.data||e.message)}},goToLocationHome(){this.selectedLocation&&this.$router.push({name:"LocationHome",params:{category:this.category,location:this.selectedLocation}})},goToPlaces(e){this.$router.push(`/places/${e}/${this.checkInDate}/${this.checkOutDate}`)}}};const He=(0,R.A)(Ue,[["render",Oe],["__scopeId","data-v-36f03f6e"]]);var We=He;const Ae={class:"location-home-container"},Re={key:0},Qe=["onClick"],Be=["src"],Fe={key:1},Ve={key:2},xe={key:1};function Me(e,o,t,a,l,s){return(0,n.uX)(),(0,n.CE)("div",Ae,[l.locationHomeData&&l.locationHomeData.locationAccommodations?((0,n.uX)(),(0,n.CE)("div",Re,[(0,n.Lk)("h3",null,(0,r.v_)(s.location)+" 숙소 목록",1),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.locationHomeData.locationAccommodations,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.accommodationId,onClick:o=>s.goToPlaces(e.accommodationId),style:{cursor:"pointer"}},[(0,n.Lk)("strong",null,(0,r.v_)(e.name),1),(0,n.eW)(" - "+(0,r.v_)(e.location),1),o[0]||(o[0]=(0,n.Lk)("br",null,null,-1)),e.image&&e.image.length?((0,n.uX)(),(0,n.CE)("img",{key:0,src:e.image[0],alt:"숙소 이미지",class:"accommodation-image"},null,8,Be)):(0,n.Q3)("",!0),o[1]||(o[1]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"태그: "+(0,r.v_)(e.tag||"없음"),1),o[2]||(o[2]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"설명: "+(0,r.v_)(e.explanation||"없음"),1),o[3]||(o[3]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"서비스: "+(0,r.v_)(e.serviceInfo||"없음"),1),o[4]||(o[4]=(0,n.Lk)("br",null,null,-1)),e.discount?((0,n.uX)(),(0,n.CE)("span",Fe,"할인: "+(0,r.v_)(e.discount)+"%",1)):(0,n.Q3)("",!0),o[5]||(o[5]=(0,n.Lk)("br",null,null,-1)),e.season?((0,n.uX)(),(0,n.CE)("span",Ve,"계절: "+(0,r.v_)(e.season),1)):(0,n.Q3)("",!0),o[6]||(o[6]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"좋아요: "+(0,r.v_)(e.likeCount),1)],8,Qe)))),128))])])):((0,n.uX)(),(0,n.CE)("p",xe,"데이터를 불러오는 중..."))])}var qe={name:"LocationHome",data(){return{locationHomeData:null,checkInDate:(new Date).toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0]}},computed:{category(){return this.$route.params.category},location(){return this.$route.params.location}},created(){this.fetchLocationHomeData()},watch:{"$route.params.location":"fetchLocationHomeData"},methods:{async fetchLocationHomeData(){try{const e=await Do.get(`/api/home/${encodeURIComponent(this.category)}/${encodeURIComponent(this.location)}`),o=e.data;200!==o.status||o.errorCode?console.error("Location Home 데이터 조회 실패:",o):(this.locationHomeData=o.data,console.log("Location Home 데이터 조회 성공:",this.locationHomeData))}catch(e){console.error("Location Home 데이터 조회 오류:",e.response?.data||e.message)}},goToPlaces(e){this.$router.push(`/places/${e}/${this.checkInDate}/${this.checkOutDate}`)}}};const Je=(0,R.A)(qe,[["render",Me],["__scopeId","data-v-243e1015"]]);var Ne=Je;const je={class:"places-container"},Ke={key:0},ze={class:"accommodation-info"},Ge={key:0},Ye=["src"],Ze={key:1},eo={key:2},oo={key:0,class:"rooms-list"},to={class:"room-info"},ao={key:0},no=["src"],lo=["src"],so=["disabled","onClick"],ro={key:1},co={key:1};function io(e,o,t,l,s,c){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",je,[o[24]||(o[24]=(0,n.Lk)("h2",null,"숙소 상세 정보",-1)),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[5]||(o[5]=(0,n.eW)("체크인: ")),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=e=>s.checkInDate=e),onChange:o[1]||(o[1]=(...e)=>c.updatePlaces&&c.updatePlaces(...e))},null,544),[[a.Jo,s.checkInDate]])]),(0,n.Lk)("label",null,[o[6]||(o[6]=(0,n.eW)("체크아웃: ")),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=e=>s.checkOutDate=e),onChange:o[3]||(o[3]=(...e)=>c.updatePlaces&&c.updatePlaces(...e))},null,544),[[a.Jo,s.checkOutDate]])])]),s.placesData?((0,n.uX)(),(0,n.CE)("div",Ke,[(0,n.Lk)("div",ze,[(0,n.Lk)("h3",null,(0,r.v_)(s.placesData.accommodation.name),1),(0,n.Lk)("p",null,[o[7]||(o[7]=(0,n.Lk)("strong",null,"위치:",-1)),(0,n.eW)(" "+(0,r.v_)(s.placesData.accommodation.location),1)]),(0,n.Lk)("p",null,[o[8]||(o[8]=(0,n.Lk)("strong",null,"태그:",-1)),(0,n.eW)(" "+(0,r.v_)(s.placesData.accommodation.tag||"없음"),1)]),(0,n.Lk)("p",null,[o[9]||(o[9]=(0,n.Lk)("strong",null,"설명:",-1)),(0,n.eW)(" "+(0,r.v_)(s.placesData.accommodation.explanation||"없음"),1)]),(0,n.Lk)("p",null,[o[10]||(o[10]=(0,n.Lk)("strong",null,"서비스:",-1)),(0,n.eW)(" "+(0,r.v_)(s.placesData.accommodation.serviceInfo||"없음"),1)]),s.placesData.accommodation.image&&s.placesData.accommodation.image.length?((0,n.uX)(),(0,n.CE)("p",Ge,[(0,n.Lk)("img",{src:s.placesData.accommodation.image[0],alt:"숙소 이미지",style:{"max-width":"300px"}},null,8,Ye)])):(0,n.Q3)("",!0),s.placesData.accommodation.discount?((0,n.uX)(),(0,n.CE)("p",Ze,[o[11]||(o[11]=(0,n.Lk)("strong",null,"할인:",-1)),(0,n.eW)(" "+(0,r.v_)(s.placesData.accommodation.discount)+"%",1)])):(0,n.Q3)("",!0),s.placesData.accommodation.season?((0,n.uX)(),(0,n.CE)("p",eo,[o[12]||(o[12]=(0,n.Lk)("strong",null,"계절:",-1)),(0,n.eW)(" "+(0,r.v_)(s.placesData.accommodation.season),1)])):(0,n.Q3)("",!0),(0,n.Lk)("p",null,[o[13]||(o[13]=(0,n.Lk)("strong",null,"좋아요:",-1)),(0,n.eW)(" "+(0,r.v_)(s.placesData.accommodation.likeCount),1)]),(0,n.Lk)("button",{onClick:o[4]||(o[4]=(...e)=>c.toggleLike&&c.toggleLike(...e))},"❤️ 좋아요")]),s.placesData.rooms&&s.placesData.rooms.length?((0,n.uX)(),(0,n.CE)("div",oo,[o[21]||(o[21]=(0,n.Lk)("h3",null,"예약 가능한 방",-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.placesData.rooms,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.roomId},[(0,n.Lk)("div",to,[(0,n.Lk)("strong",null,(0,r.v_)(e.name),1),o[14]||(o[14]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"최대 인원: "+(0,r.v_)(e.maxCapacity),1),o[15]||(o[15]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"최소 인원: "+(0,r.v_)(e.minCapacity),1),o[16]||(o[16]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"가격: "+(0,r.v_)(e.price)+"원",1),o[17]||(o[17]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"설명: "+(0,r.v_)(e.explanation||"없음"),1),o[18]||(o[18]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"서비스: "+(0,r.v_)(e.serviceInfo||"없음"),1),o[19]||(o[19]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,"태그: "+(0,r.v_)(e.tag||"없음"),1),o[20]||(o[20]=(0,n.Lk)("br",null,null,-1)),e.images&&e.images.length?((0,n.uX)(),(0,n.CE)("span",ao,[(0,n.Lk)("img",{src:e.images[0],alt:"방 이미지",style:{"max-width":"200px"}},null,8,no),(0,n.Lk)("img",{src:e.images[1],alt:"방 이미지",style:{"max-width":"200px"}},null,8,lo)])):(0,n.Q3)("",!0)]),(0,n.Lk)("button",{class:"reserve-btn",disabled:0===e.availableRooms,onClick:o=>c.handleReservation(e.roomId,e.price)}," 예약하기 ",8,so)])))),128))])])):((0,n.uX)(),(0,n.CE)("p",ro,"예약 가능한 방이 없습니다."))])):((0,n.uX)(),(0,n.CE)("p",co,"데이터를 불러오는 중...")),(0,n.bF)(i,{to:`/sub-home/${s.placesData?.accommodation?.category||"호텔"}`},{default:(0,n.k6)((()=>o[22]||(o[22]=[(0,n.eW)("카테고리로 돌아가기")]))),_:1},8,["to"]),o[25]||(o[25]=(0,n.eW)(" | ")),(0,n.bF)(i,{to:"/"},{default:(0,n.k6)((()=>o[23]||(o[23]=[(0,n.eW)("홈으로 돌아가기")]))),_:1})])}var uo={name:"PlaceDetail",data(){return{placesData:null,checkInDate:this.$route.params.checkInDate,checkOutDate:this.$route.params.checkOutDate}},computed:{accommodationId(){return this.$route.params.accommodationId},isLoggedIn(){return!!localStorage.getItem("accessToken")}},created(){this.fetchPlacesData()},methods:{async fetchPlacesData(){try{const e=await Do.get(`/api/places/${this.accommodationId}/${this.checkInDate}/${this.checkOutDate}`),o=e.data;200!==o.status||o.errorCode?console.error("Places 데이터 조회 실패:",o):(this.placesData=o.data,console.log("Places 데이터 조회 성공:",this.placesData))}catch(e){console.error("Places 데이터 조회 오류:",e.response?.data||e.message)}},updatePlaces(){this.checkInDate&&this.checkOutDate&&(this.$router.push(`/places/${this.accommodationId}/${this.checkInDate}/${this.checkOutDate}`),this.fetchPlacesData())},handleReservation(e,o){const t=localStorage.getItem("userId");t||console.error("userId가 저장되지 않음, 로그인 상태 확인 필요");const a={userId:t||"guest",accommodationId:this.accommodationId,roomId:e,name:this.placesData.accommodation.name,phoneNumber:"010-1234-5678",checkInDate:this.checkInDate,checkOutDate:this.checkOutDate,paymentComplete:!1,amount:o,paymentMethod:"credit_card"};this.isLoggedIn?(console.log("로그인 완료, 결제 페이지로 이동:",a),this.$router.push({path:"/payment",query:a})):(console.log("로그인 필요, 로그인 페이지로 이동"),this.$router.push({path:"/login",query:{redirect:this.$route.fullPath}}))},async toggleLike(){const e=localStorage.getItem("accessToken");if(!e)return alert("로그인이 필요합니다."),void this.$router.push({path:"/login",query:{redirect:this.$route.fullPath}});try{const o=await Do.post("/api/users/likes",null,{headers:{Authorization:`Bearer ${e}`},params:{accommodationId:this.accommodationId}});console.log("좋아요 처리 결과:",o.data),this.fetchPlacesData()}catch(o){console.error("좋아요 처리 오류:",o.response?.data||o.message)}}}};const mo=(0,R.A)(uo,[["render",io],["__scopeId","data-v-aeb06710"]]);var po=mo;const ho={class:"payment-container"};function ko(e,o,t,l,s,r){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",ho,[o[16]||(o[16]=(0,n.Lk)("h2",null,"결제 정보 입력",-1)),(0,n.Lk)("form",{onSubmit:o[6]||(o[6]=(0,a.D$)(((...e)=>r.submitPayment&&r.submitPayment(...e)),["prevent"]))},[(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[7]||(o[7]=(0,n.eW)("이름: ")),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.paymentData.name=e),required:""},null,512),[[a.Jo,s.paymentData.name]])])]),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[8]||(o[8]=(0,n.eW)("전화번호: ")),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.paymentData.phoneNumber=e),required:""},null,512),[[a.Jo,s.paymentData.phoneNumber]])])]),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[9]||(o[9]=(0,n.eW)("체크인: ")),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=e=>s.paymentData.checkInDate=e),readonly:""},null,512),[[a.Jo,s.paymentData.checkInDate]])])]),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[10]||(o[10]=(0,n.eW)("체크아웃: ")),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":o[3]||(o[3]=e=>s.paymentData.checkOutDate=e),readonly:""},null,512),[[a.Jo,s.paymentData.checkOutDate]])])]),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[11]||(o[11]=(0,n.eW)("결제 금액: ")),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.paymentData.amount=e),readonly:""},null,512),[[a.Jo,s.paymentData.amount]])])]),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[o[13]||(o[13]=(0,n.eW)("결제 방법: ")),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.paymentData.paymentMethod=e),required:""},o[12]||(o[12]=[(0,n.Lk)("option",{value:"credit_card"},"신용카드",-1),(0,n.Lk)("option",{value:"bank_transfer"},"계좌이체",-1)]),512),[[a.u1,s.paymentData.paymentMethod]])])]),o[14]||(o[14]=(0,n.Lk)("button",{type:"submit"},"결제하기",-1))],32),(0,n.bF)(c,{to:`/places/${s.paymentData.accommodationId}/${s.paymentData.checkInDate}/${s.paymentData.checkOutDate}`},{default:(0,n.k6)((()=>o[15]||(o[15]=[(0,n.eW)(" 뒤로 가기 ")]))),_:1},8,["to"])])}var go={name:"PaymentPage",data(){return{paymentData:{userId:this.$route.query.userId||"guest",accommodationId:this.$route.query.accommodationId,roomId:this.$route.query.roomId,name:"",phoneNumber:"",checkInDate:this.$route.query.checkInDate,checkOutDate:this.$route.query.checkOutDate,paymentComplete:!1,amount:Number(this.$route.query.amount),paymentMethod:this.$route.query.paymentMethod||"credit_card"}}},methods:{async submitPayment(){try{const e=await Do.post("/api/payment/create",this.paymentData),o=e.data;console.log("결제 응답:",o),200!==o.status||o.errorCode?alert("결제 실패: "+o.message):(alert("결제가 완료되었습니다!"),this.$router.push("/"))}catch(e){console.error("결제 오류:",e.response?.data||e.message),alert("결제 중 오류가 발생했습니다.")}}}};const vo=(0,R.A)(go,[["render",ko],["__scopeId","data-v-22ce60fa"]]);var Lo=vo;const yo=[{path:"/",name:"Home",component:B},{path:"/login",name:"Login",component:J},{path:"/register",name:"Register",component:Y},{path:"/mypage",name:"MyPage",component:ae},{path:"/profile",name:"Profile",component:de,meta:{requiresAuth:!0}},{path:"/booking",name:"Booking",component:De,meta:{requiresAuth:!0}},{path:"/home/:category",name:"CategoryHome",component:We},{path:"/home/:category/:location",name:"LocationHome",component:Ne},{path:"/places/:accommodationId/:checkInDate/:checkOutDate",name:"PlaceDetail",component:po},{path:"/payment",name:"PaymentPage",component:Lo}],fo=(0,p.aE)({history:(0,p.LA)(),routes:yo});fo.beforeEach(((e,o,t)=>{console.log(`Navigating: from=${o.fullPath}, to=${e.fullPath}`);const a=new URLSearchParams(window.location.search),n=a.get("accessToken"),l=a.get("refreshToken"),s=a.get("loginType");if(n)return console.log("accessToken 감지됨, 저장 시작"),localStorage.setItem("accessToken",n),localStorage.setItem("refreshToken",l),localStorage.setItem("loginType",s),"/login"===e.path?(console.log(" 로그인 페이지에서 메인으로 리디렉트"),t("/")):t();const r=!!localStorage.getItem("accessToken"),c=e.matched.some((e=>e.meta.requiresAuth));if(c&&!r)return console.log(`인증 필요: ${e.fullPath} → 로그인 페이지로 이동`),sessionStorage.setItem("redirectUrl",e.fullPath),t("/login");console.log("정상 이동"),t()}));var bo=fo;const Io=m.A.create({baseURL:"http://localhost:8090"});Io.interceptors.request.use((e=>{const o=localStorage.getItem("accessToken");return o&&(e.headers.Authorization=`Bearer ${o}`),e})),Io.interceptors.response.use((e=>e),(async e=>{const o=e.config;if(e.response&&401===e.response.status&&!o._retry){o._retry=!0;const e=localStorage.getItem("refreshToken");if(e)try{const{data:t}=await m.A.post("http://your-api-url/api/refresh",{refreshToken:e}),a=t.accessToken;return localStorage.setItem("accessToken",a),o.headers.Authorization=`Bearer ${a}`,Io(o)}catch(t){return console.error("리프레시 토큰 실패:",t),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),alert("세션이 만료되었습니다. 다시 로그인해 주세요."),bo.push("/login"),Promise.reject(t)}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),alert("로그인 정보가 없습니다. 다시 로그인해 주세요."),bo.push("/login")}return Promise.reject(e)}));var Do=Io,Co={name:"NavBar",data(){return{isLoggedIn:!1}},created(){this.checkLoginStatus()},watch:{$route(){this.checkLoginStatus()}},methods:{checkLoginStatus(){const e=localStorage.getItem("accessToken");console.log("accessToken:",e),this.isLoggedIn=!!e},handleAuth(){this.isLoggedIn?this.logout():this.$router.push("/login")},logout(){const e=localStorage.getItem("refreshToken"),o=localStorage.getItem("loginType");Do.post("/api/auth/logout",{refreshToken:e,loginType:o}).then((e=>{console.log("로그아웃 성공:",e.data),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("loginType"),this.isLoggedIn=!1,this.$router.push("/")})).catch((e=>{console.error("로그아웃 실패:",e.response?.data?.message||e.message)}))}}};const _o=(0,R.A)(Co,[["render",d],["__scopeId","data-v-61c90170"]]);var wo=_o,To={components:{NavBar:wo}};const So=(0,R.A)(To,[["render",s]]);var $o=So;const Eo=(0,a.Ef)($o);Eo.use(bo),Eo.mount("#app")}},o={};function t(a){var n=o[a];if(void 0!==n)return n.exports;var l=o[a]={exports:{}};return e[a].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(o,a,n,l){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],l=e[u][2];for(var r=!0,c=0;c<a.length;c++)(!1&l||s>=l)&&Object.keys(t.O).every((function(e){return t.O[e](a[c])}))?a.splice(c--,1):(r=!1,l<s&&(s=l));if(r){e.splice(u--,1);var i=n();void 0!==i&&(o=i)}}return o}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,n,l]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,a){var n,l,s=a[0],r=a[1],c=a[2],i=0;if(s.some((function(o){return 0!==e[o]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(c)var u=c(t)}for(o&&o(a);i<s.length;i++)l=s[i],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},a=self["webpackChunkduckfront"]=self["webpackChunkduckfront"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(7529)}));a=t.O(a)})();
//# sourceMappingURL=app.55cfa512.js.map